<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŽ‰ Joyeux Anniversaire ðŸŽ‚</title>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="line-container">
        <div class="btn-container">
            <button class="btn">Play!</button>
        </div>
        <svg viewBox="0 0 1320 500" fill="none" xmlns="http://www.w3.org/2000/svg" class="line">
            <g filter="url(#filter0_d_1_2)">
                <path
                    d="M5 414H149C145.5 402.333 140.6 375.4 149 361C159.5 343 170.5 322.5 164.5 306C159.7 292.8 154.167 248.833 152 228.5C134.333 230.167 95.3 221.2 80.5 172C65.7 122.8 92.6667 96.8333 108 90C116.167 86.3333 136.8 80.1 154 84.5C171.2 88.9 184.167 107.667 188.5 116.5C192.333 126.667 199.5 150.9 197.5 166.5C195 186 188 200 184.5 205C181.7 209 177.667 213.333 176 215C174.833 216.167 171.6 219.1 168 221.5C164.4 223.9 158.167 226.5 155.5 227.5L161.5 233C158.833 235.167 152.1 239.2 146.5 238L150 227.5C156.667 251.5 179.5 292.3 217.5 263.5C224.5 265.333 242.6 264.6 259 247C279.5 225 275 196 274.5 191.5C274 187 270.5 155.5 244 148.5C217.5 141.5 207 145 193 152.5C181.8 158.5 175 178 173 187C170 197.667 168.3 223.8 185.5 243C202.7 262.2 216 263.667 220.5 262L226.5 269.5C223.667 271.333 217 274.1 213 270.5L219.5 263C224.167 271.833 232.3 291.8 227.5 301C221.5 312.5 217.5 318 202 331.5C186.5 345 184.5 349 182.5 354.5C180.5 360 177 372.5 187 386.5C195 397.7 211 409.5 218 414H406C465.167 436.333 616.8 467.6 750 414V254.5C745.833 251.167 728.6 244 693 242C693.333 244 692.2 248.7 685 251.5C676 255 641 262 578.5 262.5C528.5 262.9 494.667 257.667 484 255C478.333 254 467 250.2 467 243C467 235.8 467 155 467 115.5C466.333 113 469 107.2 485 104C501 100.8 519.333 99.3333 526.5 99C539.167 98.1667 557.4 96.6 565 97V28C564.833 27.6667 563.5 26 568.5 26C570.081 26 576 26 577 25.5C578 25 584.5 20.5 583.5 16.5C582.5 12.5 576.5 1.5 575.5 1C574.667 3 567.5 10.5 567 16.5C566.829 18.5544 568 23.5 572.5 25.5C576.069 27.086 579.5 22 578 18.5C576.8 15.7 575.833 11.8333 575.5 11.5C574.167 13.8333 572.1 21.6 574.5 24C576.9 26.4 578.833 26.3333 579.5 26C580.5 25.8333 586.4 26.4 586 28C585.6 29.6 585.833 77 586 100.5C586 101.333 585.4 103.2 583 104C580.6 104.8 577.333 104.333 576 104C570.5 103 567.3 100.6 568.5 99C570 97 586.5 97 593 97C599.5 97 674.5 100 684.5 107.5C694.5 115 691.5 118 692 120C692.5 122 687 138 688.5 150C689.7 159.6 683 160 679.5 159C678.167 158.5 674.7 155.5 671.5 147.5C667.5 137.5 668 129 658.5 136C649 143 656.5 148.5 657 152C657.5 155.5 656.5 168 652 169C647.5 170 633.5 166.5 635 157C636.2 149.4 633.833 142.5 632.5 140C630.833 137.167 625.7 133.2 618.5 140C611.3 146.8 613.5 158.833 615.5 164C614.833 168.833 611.5 178 603.5 176C595.5 174 597.833 162.5 600 157C598.833 147.5 594.6 131.9 587 145.5C579.4 159.1 574.5 154.833 573 151C572.667 144.833 570.6 132.6 565 133C558 133.5 556.5 165 550.5 167.5C545.7 169.5 542.833 166.333 542 164.5C541 162.5 539.6 157.4 542 153C545 147.5 539 134 529 133.5C521 133.1 522 151.667 523.5 161C522.333 163.833 518.8 168.8 514 166C509.2 163.2 508.667 155.5 509 152C508.833 147.5 507.3 137.7 502.5 134.5C496.5 130.5 489 126 479.5 137C470 148 469 146.5 464.5 133C460.9 122.2 464.333 114.5 466.5 112C465.833 115 473.1 121.8 507.5 125C550.5 129 622 130 653.5 125C685 120 693 119 693 112.5V245.5C693.167 247.167 691.8 251.1 685 253.5C676.5 256.5 633.5 265 578.5 264.5C523.5 264 501 260.5 484 257C467 253.5 465.5 246 464.5 242C463.7 238.8 432.5 244 417 247C410.333 248.5 399.9 252.6 411.5 257C426 262.5 472.5 279.5 549.5 278.5C626.5 277.5 724.5 271.5 742.5 258.5C756.9 248.1 754.833 275.5 752 290.5C750.833 293.5 748.3 297.4 747.5 289C746.5 278.5 748.5 276.5 744 274.5C740.4 272.9 737.833 276.5 737 278.5C738.5 284 740.6 296.4 737 302C732.5 309 729.5 315.5 716.5 300.5C703.5 285.5 703.5 286.5 696 292C688.5 297.5 693.5 309.5 690 315C686.5 320.5 672 324.5 669.5 309.5C667 294.5 666 289 656.5 290.5C647 292 648 297.5 649 303.5C650 309.5 651 323.5 643.5 325.5C636 327.5 631 321.5 627 298C623 274.5 597.5 292.5 602 305C606.5 317.5 606.5 335.5 593.5 335.5C580.5 335.5 587 301.5 578.5 298C570 294.5 566.5 299.5 565 309.5C563.5 319.5 544.5 329.5 537 306.5C529.5 283.5 520 298 519 306.5C518 315 520 332.5 513 334C506 335.5 500.5 336.5 501 316C501.5 295.5 513 287 495 293.5C480.6 298.7 480.667 311.667 482.5 317.5C477.5 326.833 465.2 338.8 456 312C444.5 278.5 431 281 417 306.5C405.8 326.9 404.333 280 405 254V402.5C404.333 404.333 405.5 408.8 415.5 412C428 416 486 432.5 578.5 429.5C671 426.5 730.5 420.5 747.5 410C761.1 401.6 793.5 409.167 808 414C811.833 413.167 819.4 410.3 819 405.5C818.5 399.5 827.5 308 846 287C864.5 266 883.5 257.5 886.5 261C888.9 263.8 887.5 265.833 886.5 266.5C885.167 267.667 882.3 271.7 881.5 278.5C880.5 287 882.5 289.5 884.5 291.5C886.5 293.5 889 296 895.5 291.5C900.7 287.9 910.667 246.333 915 226C915 224.5 914.8 221.5 914 221.5C913 221.5 905 220 898 221.5C892.4 222.7 889.667 224 889 224.5C893.833 221.833 909.1 217.5 931.5 221.5C953.9 225.5 935.5 253.167 923.5 266.5C921.833 270 918.5 277.6 918.5 280C918.5 283 916 296 932 285C944.8 276.2 945 262.667 943.5 257C943 255.667 941.1 253.5 937.5 255.5C933.9 257.5 932.333 261.667 932 263.5C931.667 266.833 932.7 274.9 939.5 280.5C946.3 286.1 957.667 268.833 962.5 259.5C960 262.5 955 270.5 955 278.5C955 286.5 961.667 284.833 965 283C969.667 278 979.5 267 981.5 263C984 258 973.5 291.5 966.5 302C959.5 312.5 962.5 310.5 955 313.5C947.5 316.5 948.5 304.5 954 301C959.5 297.5 967.5 293 975.5 288.5C983.5 284 1020 268 1016.5 257C1013 246 997 261 991.5 273C986 285 993.5 291 998 290.5C1002.5 290 1021.5 285.5 1030.5 261.5L1024 277C1022.83 280.5 1021.9 287.7 1027.5 288.5C1034.5 289.5 1044 271.5 1050 263L1043 277.5C1041.67 281.167 1040.2 288.5 1045 288.5C1049.8 288.5 1051.67 287.833 1052 287.5C1053.33 286.833 1056.8 284.8 1060 282C1064 278.5 1065 275 1066 271.5C1066.8 268.7 1069.67 263.667 1071 261.5C1074 259.167 1080.4 256.2 1082 263C1083.6 269.8 1084 278.5 1084 282C1084.33 284.5 1086 289.3 1090 288.5C1095 287.5 1100.5 284 1104.5 274C1107.7 266 1108.17 261.333 1108 260C1107.67 257 1105.3 252.2 1098.5 257C1090 263 1073.5 285 1068 291C1062.5 297 983.553 320 906.5 325.5C844.858 329.9 840.482 368.667 846 387.5C847 410.667 855 446.7 879 405.5C909 354 909.5 347.92 928.5 334.5C929.333 335.333 930.5 338 928.5 342C926.5 346 920 366.333 917 376C907.833 374 888.5 370.7 884.5 373.5C880.5 376.3 903.167 378 915 378.5L913 386C912 393.667 912.2 407.9 921 403.5C929.8 399.1 937 386.333 939.5 380.5L932 402C936 395 945.6 380.5 952 378.5C958.4 376.5 960.333 377.667 960.5 378.5C962 379 964.4 381.5 962 387.5C959.6 393.5 960 398 960.5 399.5C961.333 401.833 964.4 405.4 970 401C975.6 396.6 981.667 384.167 984 378.5L976 403C980.333 395.833 990.8 380.9 998 378.5C1005.2 376.1 1007 378.833 1007 380.5C1007 384 1006.6 392 1005 396C1003.4 400 1005.33 402.333 1006.5 403C1007.67 403.333 1010.5 403.8 1012.5 403C1015 402 1018 397.5 1021 393.5C1023.4 390.3 1031.33 377.833 1035 372L1043.5 360C1044.83 358.167 1047 354.3 1045 353.5C1043 352.7 1040.17 353.833 1039 354.5C1037.5 356 1035.3 359.2 1038.5 360C1041.7 360.8 1043.83 358 1044.5 356.5C1044.83 355.667 1045 354.1 1043 354.5C1041 354.9 1039.5 356.333 1039 357C1038.67 357.833 1038.7 359.2 1041.5 358C1044.3 356.8 1044 355.5 1043.5 355C1042.5 355.167 1040.6 355.7 1041 356.5C1041.4 357.3 1042.5 358.833 1043 359.5C1036.33 370.333 1023.1 392.8 1023.5 396C1023.9 399.2 1025 401.333 1025.5 402C1027.17 403.333 1031.8 405 1037 401C1043.5 396 1047 388 1048.5 382C1049.7 377.2 1049.33 380.333 1049 382.5C1048.17 388.667 1046.9 401.4 1048.5 403C1050.5 405 1054.5 405.5 1057.5 402C1060.5 398.5 1073 377.5 1073.5 374C1072.5 377.167 1070.8 384.7 1072 389.5C1073.2 394.3 1075.83 395.5 1077 395.5C1078.5 395.333 1082.4 394.7 1086 393.5C1090.5 392 1104 388.5 1108 382C1112 375.5 1111.5 372.5 1110.5 371C1109.5 369.5 1108 368 1102 371C1097.2 373.4 1091.67 380 1089.5 383C1087.5 386.167 1083.8 393.3 1085 396.5C1086.2 399.7 1088.17 402.5 1089 403.5C1090.83 405.167 1096.4 407.4 1104 403C1111.6 398.6 1116.17 392.167 1117.5 389.5L1127 365.5C1125.5 366.333 1123.1 368.6 1125.5 371C1128.5 374 1134.5 377 1134.5 379.5C1134.5 382 1130 390 1129 395C1128.2 399 1129.67 401.333 1130.5 402C1131.5 402.833 1134.4 404.1 1138 402.5C1142.5 400.5 1164.5 374 1166 372C1167.2 370.4 1166.83 367.333 1166.5 366C1165.33 366.667 1163.5 369.4 1165.5 375C1168 382 1170 392 1169.5 394C1169 396 1168.5 400.5 1164.5 404C1161.3 406.8 1156.17 405.5 1154 404.5C1151.67 401.833 1147.6 395.5 1150 391.5C1152.4 387.5 1154.33 389.833 1155 391.5C1155.67 392.833 1158.5 396 1164.5 398C1170.5 400 1175.33 398.167 1177 397C1187.83 391.5 1210.1 380.4 1212.5 380C1214.9 379.6 1213.17 375.5 1212 373.5C1211 372.167 1207 370.3 1199 373.5C1191 376.7 1184.67 389.833 1182.5 396C1182.17 398.833 1182.5 404.6 1186.5 405C1190.5 405.4 1194.5 402.167 1196 400.5L1210.5 384C1208.33 387.167 1204.1 394.2 1204.5 397C1205 400.5 1205 401 1207.5 403.5C1209.5 405.5 1215.67 401.333 1218.5 399C1224.17 392 1235.9 376.9 1237.5 372.5C1239.1 368.1 1244.83 360.333 1247.5 357C1248.17 355.667 1248.5 353.2 1244.5 354C1240.5 354.8 1239.5 357 1239.5 358C1239.83 359.167 1241.1 361.1 1243.5 359.5C1245.9 357.9 1246.5 356.5 1246.5 356C1246.33 355.333 1245.3 354.4 1242.5 356C1239.7 357.6 1241.33 358.667 1242.5 359C1243.17 358.667 1244.6 357.8 1245 357C1245.5 356 1243.5 356 1243 357C1242.6 357.8 1243.83 359 1244.5 359.5L1227.5 390C1226.83 392.667 1225.8 398.4 1227 400C1228.5 402 1229.5 403.5 1232.5 403C1235.5 402.5 1238.5 402 1241.5 400C1243.9 398.4 1248.17 390.333 1250 386.5L1258.5 365C1256.67 366.167 1253.8 369.1 1257 371.5C1260.2 373.9 1263 376.5 1264 377.5C1264.5 378.667 1265.2 381.8 1264 385C1262.5 389 1259.5 397.5 1260 399C1260.5 400.5 1259.5 402.5 1263 403C1265.8 403.4 1268.83 402.5 1270 402C1273.33 399.667 1280.4 394.6 1282 393C1284 391 1308.5 385 1307 373.5C1305.8 364.3 1293.83 374.333 1288 380.5C1285.33 383.833 1280.4 391.8 1282 397C1283.6 402.2 1286.33 404.167 1287.5 404.5C1289 405.333 1293.2 406.5 1298 404.5C1304 402 1311 396 1315 388.5"
                    stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
                <filter id="filter0_d_1_2" x="0" y="0" width="1320" height="452.595" filterUnits="userSpaceOnUse"
                    color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix" />
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                        result="hardAlpha" />
                    <feOffset dy="4" />
                    <feGaussianBlur stdDeviation="2" />
                    <feComposite in2="hardAlpha" operator="out" />
                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1_2" />
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1_2" result="shape" />
                </filter>
            </defs>
        </svg>
    </div>

    <div class="decorations">
        <div class="garlands">
            <h1 class="scroll" data-rate=".8">test1</h1>
            <h1 class="scroll" data-rate=".6">test2</h1>
            <h1 class="scroll" data-rate=".4">test3</h1>
        </div>

        <div class="confeti">
            <h1 class="scroll" data-rate=".4">test4</h1>
            <h1 class="scroll" data-rate=".6">test5</h1>
        </div>
    </div>
    <div class="filler"></div>

    <script>
        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }

        function getElementY(element) {
            return window.pageYOffset + element.getBoundingClientRect().top;
        }

        const targets = document.querySelectorAll('.scroll');
        const path = document.querySelector('.line path');
        const pathLength = path.getTotalLength();

        path.style.strokeDasharray = `${pathLength} ${pathLength}`;
        path.style.strokeDashoffset = pathLength;

        window.addEventListener('scroll', () => {
            let scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document
                .documentElement.scrollHeight - document.documentElement.clientHeight);
            let drawLength = pathLength * scrollPercentage;
            path.style.strokeDashoffset = pathLength - drawLength;

            if (scrollPercentage >= 0.99) {
                path.style.strokeDasharray = 'none';
            } else {
                path.style.strokeDasharray = `${pathLength} ${pathLength}`;
            }

            for (let index = 0; index < targets.length; index++) {
                const element = targets[index];
                const pos = window.pageYOffset * element.dataset.rate;

                if (element.getBoundingClientRect().top > 0) {
                    element.style.transform = `translateY(-${pos}px)`;
                }
            }
        });

        let isScrolling = false;

        function doScrolling(targetY, duration) {

            if (isScrolling) {
                isScrolling = false;
                return;
            }

            isScrolling = true;

            const startingY = window.pageYOffset;
            const diff = targetY - startingY - (window.innerHeight * (window.innerHeight / document.body.offsetHeight));

            if (!diff) {
                return;
            }

            // Easing function: easeInOutCubic
            // From: https://gist.github.com/gre/1650294
            const easing = function (t) {
                return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;
            }

            let start;

            // Bootstrap our animation - it will get called right before next frame shall be rendered.
            window.requestAnimationFrame(function step(timestamp) {
                if (!start) {
                    start = timestamp;
                }

                // Elapsed miliseconds since start of scrolling.
                let time = timestamp - start;
                // Get percent of completion in range [0, 1].
                let percent = Math.min(time / duration, 1)

                window.scrollTo(0, startingY + diff * percent);

                // Proceed with animation as long as we wanted it to.
                if (time >= duration || !isScrolling) {
                    isScrolling = false;
                    return;
                }

                window.requestAnimationFrame(step);
            })
        }

        const btn = document.querySelector('.btn');
        btn.addEventListener('click', () => {
            doScrolling(document.body.offsetHeight, 10000);
        });
    </script>
</body>

</html>